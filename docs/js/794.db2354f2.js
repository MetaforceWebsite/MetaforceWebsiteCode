"use strict";(globalThis["webpackChunkmetaforcehome"]=globalThis["webpackChunkmetaforcehome"]||[]).push([[794],{8794:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var a=s(9835),l=s(6970);const o={class:"row q-mt-lg"},i=(0,a._)("div",{class:"col-1"},null,-1),n={class:"col-10 row"},u={class:"col-6 q-pa-sm"},c=(0,a.Uk)("Account Information"),r={class:"col-6 q-pa-sm"},d=(0,a.Uk)("My Cases"),m=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"text-left"},"Case #"),(0,a._)("th",{class:"text-left"},"Subject"),(0,a._)("th",{class:"text-left"},"Status"),(0,a._)("th",{class:"text-left"},"CreatedDate")])],-1),_={class:"text-left"},p=["onClick"],b={class:"text-left"},w={class:"text-left"},h={class:"text-left"},g=(0,a.Uk)(" You haven't raised any cases yet! "),y={class:"col-12 q-pt-md"},f=(0,a.Uk)("My Subscriptions"),C=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:""},"Action"),(0,a._)("th",{class:"text-left"},"Name"),(0,a._)("th",{class:"text-left"},"Status"),(0,a._)("th",{class:"text-left"},"Started At"),(0,a._)("th",{class:"text-left"},"First Billed At"),(0,a._)("th",{class:"text-left"},"Next Billed At"),(0,a._)("th",{class:"text-left"},"Billing Cycle")])],-1),v={class:""},W={class:"text-left"},q={class:"text-left"},k={class:"text-left"},S={class:"text-left"},x={class:"text-left"},Z={class:"text-left"},Q=(0,a._)("div",{class:"q-mb-md"},"You haven't subscribed Metaforce yet!",-1),U=(0,a._)("div",{class:"col-1"},null,-1),A=(0,a.Uk)("Unsubscribe Metaforce"),V=(0,a._)("div",{class:"text-subtitle2"},"We're truly sorry to see you go! ",-1),z=(0,a._)("div",{class:"q-my-md"}," We've cherished having you as part of our services and appreciate every moment you've spent with us. If there's anything we could have done better or any feedback you'd like to share, we'd be incredibly grateful to hear it. Your insights can help us improve and offer an even better experience. ",-1),R=(0,a._)("div",{class:"text-subtitle2"}," Are you sure you want to unsubscribe? ",-1);function j(e,t,s,j,T,L){const D=(0,a.up)("q-icon"),N=(0,a.up)("q-toolbar-title"),I=(0,a.up)("q-btn"),B=(0,a.up)("q-toolbar"),$=(0,a.up)("q-input"),F=(0,a.up)("q-form"),P=(0,a.up)("q-card-section"),Y=(0,a.up)("q-card"),E=(0,a.up)("q-spinner-bars"),H=(0,a.up)("q-markup-table"),M=(0,a.up)("new-case-popup"),O=(0,a.up)("case-detail-popup"),K=(0,a.up)("q-card-actions"),G=(0,a.up)("q-dialog"),J=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[i,(0,a._)("div",n,[(0,a._)("div",u,[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"account_circle",color:"white",size:"md"}),(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(I,{onClick:L.updateAccount,loading:T.isAccountUpdating,icon:"cloud_upload",class:"bg-white text-primary",dense:"","no-caps":""},null,8,["onClick","loading"])])),_:1}),(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,{ref:"formCmp"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{modelValue:T.customer.easymeta__Email__c,"onUpdate:modelValue":t[0]||(t[0]=e=>T.customer.easymeta__Email__c=e),label:"Email address",type:"email",class:"q-mb-md",disable:"",outlined:"","hide-bottom-space":""},{prepend:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"email"})])),_:1},8,["modelValue"]),(0,a.Wm)($,{modelValue:T.customer.easymeta__FirstName__c,"onUpdate:modelValue":t[1]||(t[1]=e=>T.customer.easymeta__FirstName__c=e),label:"First Name",class:"q-mb-md",rules:T.nameRules,"lazy-rules":"ondemand",outlined:"","hide-bottom-space":""},{prepend:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"person"})])),_:1},8,["modelValue","rules"]),(0,a.Wm)($,{modelValue:T.customer.easymeta__LastName__c,"onUpdate:modelValue":t[2]||(t[2]=e=>T.customer.easymeta__LastName__c=e),label:"Last Name",class:"q-mb-md",rules:T.nameRules,"lazy-rules":"ondemand",outlined:"","hide-bottom-space":""},{prepend:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"person"})])),_:1},8,["modelValue","rules"])])),_:1},512)])),_:1})])),_:1})]),(0,a._)("div",r,[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"contact_support",color:"white",size:"md"}),(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(I,{onClick:t[3]||(t[3]=t=>e.$refs.newCasePopupCmp.show()),icon:"add_circle_outline",class:"bg-white text-primary",dense:"","no-caps":""})])),_:1}),T.isRelatedListLoading?((0,a.wg)(),(0,a.j4)(P,{key:0,class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{size:"sm",color:"primary"})])),_:1})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[T.myCases.length?((0,a.wg)(),(0,a.j4)(H,{key:0},{default:(0,a.w5)((()=>[m,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.myCases,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",_,[(0,a._)("a",{onClick:t=>L.viewCaseDetail(e),class:"text-underline"},(0,l.zw)(e.CaseNumber),9,p)]),(0,a._)("td",b,(0,l.zw)(e.Subject),1),(0,a._)("td",w,(0,l.zw)(e.Status),1),(0,a._)("td",h,(0,l.zw)(e.CreatedDate),1)])))),128))])])),_:1})):((0,a.wg)(),(0,a.j4)(P,{key:1,class:"text-center q-py-xl"},{default:(0,a.w5)((()=>[g])),_:1}))],64))])),_:1})]),(0,a._)("div",y,[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"redeem",color:"white",size:"md"}),(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[f])),_:1}),(0,a.Wm)(I,{icon:"shopping_cart",to:"/pricing",class:"bg-white text-primary",dense:"","no-caps":""})])),_:1}),T.isRelatedListLoading?((0,a.wg)(),(0,a.j4)(P,{key:0,class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{size:"sm",color:"primary"})])),_:1})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[T.mySubscriptions.length?((0,a.wg)(),(0,a.j4)(H,{key:0},{default:(0,a.w5)((()=>[C,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.mySubscriptions,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",v,["canceled"!=e.easymeta__Status__c?((0,a.wg)(),(0,a.j4)(I,{key:0,label:"Unsubscribe",color:"negative",onClick:t=>L.showUnsubscribeAlert(e),dense:"","no-caps":"",outline:""},null,8,["onClick"])):(0,a.kq)("",!0)]),(0,a._)("td",W,(0,l.zw)(e.Name),1),(0,a._)("td",q,(0,l.zw)(e.easymeta__Status__c),1),(0,a._)("td",k,(0,l.zw)(e.easymeta__Started_At__c),1),(0,a._)("td",S,(0,l.zw)(e.easymeta__First_Billed_At__c),1),(0,a._)("td",x,(0,l.zw)(e.easymeta__Next_Billed_At__c),1),(0,a._)("td",Z,(0,l.zw)(e.easymeta__Billing_Cycle__c),1)])))),128))])])),_:1})):((0,a.wg)(),(0,a.j4)(P,{key:1,class:"text-center q-py-xl"},{default:(0,a.w5)((()=>[Q,(0,a.Wm)(I,{label:"Subscribe Now","icon-right":"arrow_circle_right",class:"text-primary",to:"/pricing","no-caps":""})])),_:1}))],64))])),_:1})])]),U]),(0,a.Wm)(M,{ref:"newCasePopupCmp",customer:T.customer,onOnSubmitted:L.loadCustomerRelatedList},null,8,["customer","onOnSubmitted"]),(0,a.Wm)(O,{ref:"caseDetailCmp"},null,512),(0,a.Wm)(G,{modelValue:T.unsubscribeAlert,"onUpdate:modelValue":t[4]||(t[4]=e=>T.unsubscribeAlert=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[A])),_:1})])),_:1}),(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[V,z,R])),_:1}),(0,a.Wm)(K,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(I,{flat:"",label:"Cancel",color:"primary","no-caps":""},null,512),[[J]]),(0,a.Wm)(I,{loading:T.isUnsubscribing,onClick:L.unsubscribe,label:"Unsubscribe Now",color:"negative","no-caps":""},{loading:(0,a.w5)((()=>[(0,a.Wm)(E,{size:"xs"})])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}s(9665);var T=s(158),L=s(8853),D=s(4329),N=s(5869);const I=(0,a.Uk)("Submit A Case"),B={class:"text-center q-mt-lg"};function $(e,t,s,l,o,i){const n=(0,a.up)("q-icon"),u=(0,a.up)("q-toolbar-title"),c=(0,a.up)("q-toolbar"),r=(0,a.up)("q-input"),d=(0,a.up)("q-editor"),m=(0,a.up)("q-spinner-bars"),_=(0,a.up)("q-btn"),p=(0,a.up)("q-form"),b=(0,a.up)("q-card"),w=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(w,{modelValue:o.isShow,"onUpdate:modelValue":t[2]||(t[2]=e=>o.isShow=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"contact_support",size:"md"}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[I])),_:1})])),_:1}),(0,a.Wm)(p,{ref:"caseFormCmp",class:"q-ma-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.newCase.subject,"onUpdate:modelValue":t[0]||(t[0]=e=>o.newCase.subject=e),label:"Subject",class:"q-mb-md",rules:o.nameRules,"lazy-rules":"ondemand",outlined:"","hide-bottom-space":""},null,8,["modelValue","rules"]),(0,a.Wm)(d,{modelValue:o.newCase.body,"onUpdate:modelValue":t[1]||(t[1]=e=>o.newCase.body=e),placeholder:"Type your question or idea...","min-height":"5rem"},null,8,["modelValue"]),(0,a._)("div",B,[(0,a.Wm)(_,{onClick:i.submitCase,loading:o.isSaving,label:"Submit",color:"primary",class:"bg-primary text-white","no-caps":"",flat:""},{loading:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"xs"})])),_:1},8,["onClick","loading"])])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])}const F={data(){return{isShow:!1,newCase:{subject:"",body:""},isSaving:!1,nameRules:[e=>e&&e.length>0||"Required"]}},props:{customer:{type:Object,required:!0}},methods:{show(){this.isShow=!0},async submitCase(){let e=await this.$refs.caseFormCmp.validate();if(e){this.isSaving=!0;let e=await(0,D.v_)(L.LS,{customerId:this.customer.Id,subject:this.newCase.subject,body:this.newCase.body});e.isSuccess?this.$emit("onSubmitted"):(0,N.cB)(e.message),this.isSaving=!1}}}};var P=s(1639),Y=s(3706),E=s(4458),H=s(1663),M=s(2857),O=s(1973),K=s(8326),G=s(9897),J=s(4922),X=s(8879),ee=s(3382),te=s(9984),se=s.n(te);const ae=(0,P.Z)(F,[["render",$]]),le=ae;se()(F,"components",{QDialog:Y.Z,QCard:E.Z,QToolbar:H.Z,QIcon:M.Z,QToolbarTitle:O.Z,QForm:K.Z,QInput:G.Z,QEditor:J.Z,QBtn:X.Z,QSpinnerBars:ee.Z});const oe=(0,a.Uk)("Case Details");function ie(e,t,s,l,o,i){const n=(0,a.up)("q-icon"),u=(0,a.up)("q-toolbar-title"),c=(0,a.up)("q-toolbar"),r=(0,a.up)("q-input"),d=(0,a.up)("q-editor"),m=(0,a.up)("q-form"),_=(0,a.up)("q-card"),p=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(p,{modelValue:o.isShow,"onUpdate:modelValue":t[0]||(t[0]=e=>o.isShow=e)},{default:(0,a.w5)((()=>[o.caseRecord?((0,a.wg)(),(0,a.j4)(_,{key:0,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"contact_support",size:"md"}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[oe])),_:1})])),_:1}),(0,a.Wm)(m,{class:"q-ma-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{dense:"","model-value":o.caseRecord.CaseNumber,label:"Case Number",class:"q-mb-md",disable:""},null,8,["model-value"]),(0,a.Wm)(r,{dense:"","model-value":o.caseRecord.Status,label:"Status",class:"q-mb-md",disable:""},null,8,["model-value"]),(0,a.Wm)(r,{dense:"","model-value":o.caseRecord.Subject,label:"Subject",class:"q-mb-md",disable:""},null,8,["model-value"]),(0,a.Wm)(d,{dense:"",disable:"","model-value":o.caseRecord.easymeta__CaseDetail__c,"min-height":"5rem"},null,8,["model-value"])])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1},8,["modelValue"])}const ne={data(){return{isShow:!1,caseRecord:null}},methods:{show(e){this.isShow=!0,this.caseRecord=e}}},ue=(0,P.Z)(ne,[["render",ie]]),ce=ue;se()(ne,"components",{QDialog:Y.Z,QCard:E.Z,QToolbar:H.Z,QIcon:M.Z,QToolbarTitle:O.Z,QForm:K.Z,QInput:G.Z,QEditor:J.Z});const re={components:{newCasePopup:le,CaseDetailPopup:ce},data(){return{loginToken:null,customer:{},myCases:[],mySubscriptions:[],isAccountUpdating:!1,isRelatedListLoading:!1,unsubscribeAlert:!1,isUnsubscribing:!1,selectedSubId:null,nameRules:[e=>e&&e.length>0||"Required"]}},methods:{async updateAccount(){let e=await this.$refs.formCmp.validate();if(e){this.isAccountUpdating=!0;let e=await(0,D.gz)(`${L.Fv}?token=${this.loginToken}`,{firstname:this.customer.easymeta__FirstName__c,lastname:this.customer.easymeta__LastName__c});e.isSuccess?(T.n.setCustomer(this.customer),(0,N.$v)("Updated successfully.")):(0,N.cB)(e.message),this.isAccountUpdating=!1}},async loadCustomerRelatedList(){this.isRelatedListLoading=!0;let e=await(0,D.U2)(`${L.dP}?token=${this.loginToken}`);var t,s;e.isSuccess?(this.myCases=(null===(t=e.customer.easymeta__Cases__r)||void 0===t?void 0:t.records)||[],this.mySubscriptions=(null===(s=e.customer.easymeta__PaddleSubscriptions__r)||void 0===s?void 0:s.records)||[]):this.$router.push("/");this.isRelatedListLoading=!1},showUnsubscribeAlert(e){this.unsubscribeAlert=!0,this.selectedSubId=e.easymeta__PaddleId__c},async unsubscribe(){if(!this.selectedSubId)return;this.isUnsubscribing=!0;let e=await(0,D.v_)(L._E,{subscriptionId:this.selectedSubId});e.isSuccess?this.unsubscribeAlert=!1:(0,N.cB)(e.message),this.isUnsubscribing=!1},viewCaseDetail(e){this.$refs.caseDetailCmp.show(e)}},async mounted(){let e=this.$route.query.token;(null===e||void 0===e?void 0:e.length)>30&&(this.loginToken=e,T.n.setLoginToken(e)),this.loginToken=T.n.getLoginToken(),this.customer=T.n.getCustomer()||{},this.loginToken?await this.loadCustomerRelatedList():this.$router.push("/")}};var de=s(3190),me=s(6933),_e=s(1821),pe=s(2146);const be=(0,P.Z)(re,[["render",j]]),we=be;se()(re,"components",{QCard:E.Z,QToolbar:H.Z,QIcon:M.Z,QToolbarTitle:O.Z,QBtn:X.Z,QCardSection:de.Z,QForm:K.Z,QInput:G.Z,QSpinnerBars:ee.Z,QMarkupTable:me.Z,QDialog:Y.Z,QCardActions:_e.Z}),se()(re,"directives",{ClosePopup:pe.Z})}}]);